<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>EvidenceGap Radar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Evita 404 de favicon -->
  <link rel="icon" href="data:," />

  <!-- Cache-busting para que SIEMPRE cargue la última versión -->
  <link rel="stylesheet" href="styles.css?v=20260217_1" />
</head>

<body>

  <header class="header">
    <h1>EvidenceGap Radar</h1>
    <p class="author">Creado por Ramón Morillo · Febrero 2026</p>
  </header>

  <main class="container">

    <!-- Texto explicativo (debajo del título, encima del formulario) -->
    <section class="card" style="margin-bottom: 16px;">
      <h2 style="margin-top:0;">¿Qué es esta herramienta?</h2>
      <p style="margin: 0; opacity: 0.9; line-height: 1.45;">
        EvidenceGap Radar genera una <b>fotografía rápida</b> del "paisaje de evidencia" de una pregunta tipo PICO-lite,
        combinando señales de <b>PubMed</b> (publicaciones recientes + histórico) y <b>ClinicalTrials.gov</b> (ensayos).
      </p>
      <p style="margin: 10px 0 0; opacity: 0.75; line-height: 1.45;">
        Útil para docencia y para orientar búsquedas. <b>No sustituye</b> lectura crítica ni evaluación metodológica.
      </p>
    </section>

    <section class="card">
      <h2>PICO-lite</h2>

      <div class="grid">
        <div class="field">
          <label>Población</label>
          <input id="population" type="text" placeholder="Ej: pacientes VIH" />
        </div>

        <div class="field">
          <label>Intervención / Exposición</label>
          <input id="intervention" type="text" placeholder="Ej: telefarmacia" autocomplete="off"/>
          <div id="intervention-suggest" class="suggestions"></div>
        </div>

        <div class="field">
          <label>Outcome</label>
          <input id="outcome" type="text" placeholder="Ej: adherencia" autocomplete="off"/>
          <div id="outcome-suggest" class="suggestions"></div>
        </div>

        <div class="field">
          <label>Contexto (opcional)</label>
          <input id="context" type="text" placeholder="Ej: farmacia hospitalaria" />
        </div>
      </div>

      <div class="actions">
        <select id="window">
          <option value="7">7 días</option>
          <option value="30">30 días</option>
          <option value="90">90 días</option>
          <option value="365">1 año</option>
        </select>

        <button id="analyze">Analizar</button>

        <!-- Botón reiniciar -->
        <button id="reset" class="secondary" type="button">Reiniciar</button>

        <!-- Limpiar caché -->
        <button id="clearCache" class="secondary" type="button">Limpiar caché</button>

        <button id="print">Imprimir / Guardar PDF</button>
      </div>

      <!-- Loading spinner -->
      <div id="loadingBox" class="loading-box hidden">
        <span class="spinner"></span>
        <span>Consultando PubMed y ClinicalTrials.gov…</span>
      </div>

      <!-- Caja de error -->
      <div id="errorBox" class="error-box hidden"></div>
    </section>

    <section id="results" class="card hidden">
      <div class="results-header">
        <h2>Resultados</h2>
        <span id="cacheIndicator" class="cache-badge hidden">Resultados en caché</span>
      </div>
      <div id="report"></div>
    </section>

  </main>

  <!-- Cache-busting del JS para evitar que cargue app.js antiguo -->
  <script type="module" src="js/app.js?v=20260217_1"></script>

</body>
</html>
